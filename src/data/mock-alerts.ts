import type { Alert, AlertEvent } from "@/types";

export const mockAlerts: Alert[] = [
  {
    id: "alert_1",
    organizationId: "org_1",
    name: "High Daily Spend",
    type: "spend_threshold",
    condition: { metric: "daily_cost", operator: "gt", value: 500, timeWindow: "24h" },
    channels: [{ type: "email", config: { recipients: "admin@example.com" } }],
    enabled: true,
    createdAt: new Date("2024-01-01T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 24),
  },
  {
    id: "alert_2",
    organizationId: "org_1",
    name: "Budget 90% Threshold",
    type: "budget_threshold",
    condition: { metric: "budget_usage", operator: "gte", value: 90 },
    channels: [
      { type: "email", config: { recipients: "admin@example.com,finance@example.com" } },
      { type: "slack", config: { channel: "#cost-alerts" } },
    ],
    enabled: true,
    createdAt: new Date("2024-01-01T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 48),
  },
  {
    id: "alert_3",
    organizationId: "org_1",
    name: "Spending Anomaly Detection",
    type: "spend_anomaly",
    condition: { metric: "hourly_cost", operator: "gt", value: 200, timeWindow: "1h" },
    channels: [{ type: "slack", config: { channel: "#engineering" } }],
    enabled: true,
    createdAt: new Date("2024-01-05T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 12),
  },
  {
    id: "alert_4",
    organizationId: "org_1",
    name: "Forecast Exceeded",
    type: "forecast_exceeded",
    condition: { metric: "monthly_forecast", operator: "gt", value: 25000 },
    channels: [
      { type: "email", config: { recipients: "cfo@example.com" } },
      { type: "pagerduty", config: { serviceKey: "pd-xxx" } },
    ],
    enabled: true,
    createdAt: new Date("2024-01-02T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 72),
  },
  {
    id: "alert_5",
    organizationId: "org_1",
    name: "Provider Error Rate",
    type: "provider_error",
    condition: { metric: "error_rate", operator: "gt", value: 5, timeWindow: "1h" },
    channels: [{ type: "slack", config: { channel: "#ops-alerts" } }],
    enabled: false,
    createdAt: new Date("2024-01-08T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 5),
  },
  {
    id: "alert_6",
    organizationId: "org_1",
    name: "Usage Spike Detection",
    type: "usage_spike",
    condition: { metric: "requests_per_minute", operator: "gt", value: 1000, timeWindow: "5m" },
    channels: [{ type: "webhook", config: { url: "https://api.example.com/alerts" } }],
    enabled: true,
    createdAt: new Date("2024-01-10T00:00:00Z"),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 6),
  },
];

export const mockAlertEvents: AlertEvent[] = [
  {
    id: "event_1",
    alertId: "alert_1",
    organizationId: "org_1",
    type: "spend_threshold",
    severity: "warning",
    status: "resolved",
    title: "Daily spend exceeded threshold",
    message: "Daily spend of $525.50 exceeded the $500 threshold",
    triggeredAt: new Date(Date.now() - 1000 * 60 * 60 * 2),
    resolvedAt: new Date(Date.now() - 1000 * 60 * 30),
    metadata: { currentValue: 525.50, threshold: 500 },
  },
  {
    id: "event_2",
    alertId: "alert_2",
    organizationId: "org_1",
    type: "budget_threshold",
    severity: "critical",
    status: "active",
    title: "Engineering budget at 90%",
    message: "Engineering team budget has reached 90% utilization ($7,234 of $8,000)",
    triggeredAt: new Date(Date.now() - 1000 * 60 * 60 * 5),
    metadata: { currentValue: 7234, threshold: 90, budget: 8000 },
  },
  {
    id: "event_3",
    alertId: "alert_3",
    organizationId: "org_1",
    type: "spend_anomaly",
    severity: "warning",
    status: "acknowledged",
    title: "Unusual spending pattern detected",
    message: "Hourly spend of $245 is 3x higher than average",
    triggeredAt: new Date(Date.now() - 1000 * 60 * 60 * 8),
    acknowledgedAt: new Date(Date.now() - 1000 * 60 * 60 * 7),
    metadata: { currentValue: 245, average: 82 },
  },
  {
    id: "event_4",
    alertId: "alert_6",
    organizationId: "org_1",
    type: "usage_spike",
    severity: "info",
    status: "resolved",
    title: "Request spike detected",
    message: "Request rate spiked to 1,250/min (threshold: 1,000/min)",
    triggeredAt: new Date(Date.now() - 1000 * 60 * 60 * 24),
    resolvedAt: new Date(Date.now() - 1000 * 60 * 60 * 23),
    metadata: { currentValue: 1250, threshold: 1000 },
  },
  {
    id: "event_5",
    alertId: "alert_4",
    organizationId: "org_1",
    type: "forecast_exceeded",
    severity: "critical",
    status: "active",
    title: "Monthly forecast exceeded budget",
    message: "Projected monthly spend of $27,500 exceeds $25,000 budget",
    triggeredAt: new Date(Date.now() - 1000 * 60 * 30),
    metadata: { forecast: 27500, budget: 25000 },
  },
];

// Alert summary stats
export const mockAlertSummary = {
  totalRules: mockAlerts.length,
  enabledRules: mockAlerts.filter((a) => a.enabled).length,
  triggeredToday: mockAlertEvents.filter((e) => {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    return e.triggeredAt >= today;
  }).length,
  activeEvents: mockAlertEvents.filter((e) => e.status === "active").length,
  criticalEvents: mockAlertEvents.filter((e) => e.severity === "critical" && e.status === "active").length,
};
